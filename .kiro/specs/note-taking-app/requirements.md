# 需求文档

## 简介

本项目旨在开发一个类似印象笔记的在线笔记应用，提供精美的用户界面、丰富的笔记格式支持、用户认证系统以及基于用户的笔记隔离功能。用户可以通过邮箱注册账号，登录后管理自己的笔记。

## 术语表

- **笔记应用 (Note Application)**: 提供笔记创建、编辑、存储和检索功能的Web应用系统
- **用户 (User)**: 注册并使用笔记应用的个人账户
- **笔记 (Note)**: 用户创建的包含文本、格式和元数据的内容单元
- **认证系统 (Authentication System)**: 处理用户注册、登录和会话管理的子系统
- **邮箱验证服务 (Email Verification Service)**: 验证用户邮箱真实性的服务组件
- **富文本编辑器 (Rich Text Editor)**: 支持多种格式化选项的文本编辑组件

## 需求

### 需求 1: 用户注册

**用户故事:** 作为新用户，我想通过邮箱注册账号，以便我可以开始使用笔记应用

#### 验收标准

1. THE 笔记应用 SHALL 提供注册页面，包含邮箱输入框、密码输入框和确认密码输入框
2. WHEN 用户提交注册表单时，THE 认证系统 SHALL 验证邮箱格式是否符合标准格式（支持QQ、163、Google、Outlook等常见邮箱）
3. WHEN 用户提交有效的注册信息时，THE 邮箱验证服务 SHALL 向用户邮箱发送验证链接
4. WHEN 用户点击邮箱中的验证链接时，THE 认证系统 SHALL 激活用户账户
5. IF 用户尝试使用已注册的邮箱再次注册，THEN THE 认证系统 SHALL 显示错误提示"该邮箱已被注册"

### 需求 2: 用户登录

**用户故事:** 作为已注册用户，我想通过邮箱和密码登录，以便访问我的笔记

#### 验收标准

1. THE 笔记应用 SHALL 提供登录页面，包含邮箱输入框和密码输入框
2. WHEN 用户提交正确的邮箱和密码时，THE 认证系统 SHALL 创建用户会话并跳转到笔记主页
3. IF 用户提交错误的邮箱或密码，THEN THE 认证系统 SHALL 显示错误提示"邮箱或密码错误"
4. IF 用户尝试登录未验证邮箱的账户，THEN THE 认证系统 SHALL 显示提示"请先验证邮箱"
5. WHEN 用户成功登录后，THE 认证系统 SHALL 保持用户会话状态至少7天

### 需求 3: 笔记创建和编辑

**用户故事:** 作为登录用户，我想创建和编辑笔记，以便记录我的想法和信息

#### 验收标准

1. WHEN 用户点击"新建笔记"按钮时，THE 笔记应用 SHALL 打开新的笔记编辑页面
2. THE 富文本编辑器 SHALL 支持以下格式：标题（H1-H6）、粗体、斜体、下划线、删除线、有序列表、无序列表、代码块、引用、链接和图片插入
3. WHEN 用户编辑笔记内容时，THE 笔记应用 SHALL 每30秒自动保存一次
4. WHEN 用户点击"保存"按钮时，THE 笔记应用 SHALL 立即保存笔记内容到数据库
5. THE 笔记应用 SHALL 为每个笔记记录创建时间和最后修改时间

### 需求 4: 笔记列表和检索

**用户故事:** 作为登录用户，我想查看我的所有笔记列表，以便快速找到需要的笔记

#### 验收标准

1. WHEN 用户登录成功后，THE 笔记应用 SHALL 显示该用户的所有笔记列表
2. THE 笔记应用 SHALL 在笔记列表中显示笔记标题、创建时间和内容预览（前100个字符）
3. THE 笔记应用 SHALL 按最后修改时间倒序排列笔记
4. WHEN 用户点击笔记列表中的某个笔记时，THE 笔记应用 SHALL 打开该笔记的详细页面
5. THE 笔记应用 SHALL 提供搜索功能，允许用户按标题或内容搜索笔记

### 需求 5: 用户数据隔离

**用户故事:** 作为用户，我想确保只能看到自己的笔记，以便保护我的隐私

#### 验收标准

1. WHEN 用户登录后，THE 笔记应用 SHALL 仅显示该用户创建的笔记
2. THE 笔记应用 SHALL 阻止用户访问其他用户的笔记数据
3. WHEN 用户创建新笔记时，THE 笔记应用 SHALL 自动关联该笔记到当前登录用户
4. IF 未登录用户尝试访问笔记页面，THEN THE 认证系统 SHALL 重定向到登录页面

### 需求 6: 用户界面设计

**用户故事:** 作为用户，我想使用精美的界面，以便获得良好的使用体验

#### 验收标准

1. THE 笔记应用 SHALL 采用现代化的响应式设计，支持桌面和移动设备
2. THE 笔记应用 SHALL 使用清晰的视觉层次和一致的配色方案
3. THE 笔记应用 SHALL 在所有交互元素上提供视觉反馈（悬停、点击状态）
4. THE 笔记应用 SHALL 使用平滑的过渡动画提升用户体验
5. THE 富文本编辑器 SHALL 提供直观的工具栏，包含所有格式化选项的图标按钮

### 需求 7: 笔记删除

**用户故事:** 作为用户，我想删除不需要的笔记，以便保持笔记列表整洁

#### 验收标准

1. THE 笔记应用 SHALL 在笔记详情页面提供"删除"按钮
2. WHEN 用户点击"删除"按钮时，THE 笔记应用 SHALL 显示确认对话框
3. WHEN 用户确认删除操作时，THE 笔记应用 SHALL 从数据库中删除该笔记
4. WHEN 笔记删除成功后，THE 笔记应用 SHALL 返回到笔记列表页面
5. THE 笔记应用 SHALL 仅允许用户删除自己创建的笔记

### 需求 8: 用户登出

**用户故事:** 作为登录用户，我想安全地退出账户，以便保护我的账户安全

#### 验收标准

1. THE 笔记应用 SHALL 在导航栏提供"退出登录"按钮
2. WHEN 用户点击"退出登录"按钮时，THE 认证系统 SHALL 清除用户会话
3. WHEN 用户退出登录后，THE 笔记应用 SHALL 重定向到登录页面
4. WHEN 用户退出登录后，THE 认证系统 SHALL 阻止访问需要认证的页面
